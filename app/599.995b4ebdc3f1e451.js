"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[599],{8599:(N,m,n)=>{n.r(m),n.d(m,{QuoteDocModule:()=>G});var p=n(6895),h=n(2510),t=n(4650),f=n(2327),g=n(5822),y=n(8139),l=n(7009),b=n(4726),v=n(7392),C=n(2395),D=n(2993);function Q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"app-cond-quote",9),t.NdJ("status",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.onStatus(i))}),t.qZA(),t._UZ(2,"hr"),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("condition",e)("edit",!0)}}const q=[{path:"",component:(()=>{class o{constructor(e,a,i,r){this.dg=e,this.httpGen=a,this.sharedvar=i,this.snkBar=r,this.quote_cond_list=[],this.settings={controls:[{name:"name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"site",label:"Vinculo a la p\xe1gina:",type:"text",style:"w-full",validators:{required:!0}},{name:"phone",label:"Tel\xe9fono:",type:"text",validators:{required:!0}},{name:"address",label:"Direcci\xf3n corta:",type:"text",validators:{required:!0}},{name:"consecutive",label:"Consecutivo:",type:"number",validators:{required:!0}},{name:"p_iva",label:"Porcentaje de iva:",type:"number",validators:{required:!0}}]}}ngOnInit(){this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition))}addCondition(){const e=this.newCondition("T\xedtulo");this.editAddCondition(e)}editAddCondition(e){const i=e.name||"";this.dg.aDefault({title:"Condiciones Comerciales",value:e,schema:{controls:[{name:"name",label:"T\xedtulo:",type:"text",style:{width:"150px"},validators:{required:!0}},{name:"detail",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:6,validators:{}}]},dgheigth:600}).subscribe(d=>{if(d){const c=this.quote_cond_list.find(u=>u.name===i);c?(c.name=d.name,c.detail=d.detail):this.quote_cond_list.push({name:d.name,detail:d.detail}),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(u=>{})}})}onStatus(e){switch(e.tag){case"edit":this.editAddCondition(e);break;case"delete":const a=this.quote_cond_list.findIndex(i=>i.name===e.name);a>=0&&(this.quote_cond_list.splice(a,1),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(i=>{}))}}newCondition(e){return{name:e}}onGetData(e){e.name=e.name?.toUpperCase()||"",this.dg.updatePropResult(this.sharedvar.general,e),!1!==e._valid_?this.httpGen.updateGeneral(this.sharedvar.general).subscribe(a=>{}):this.snkBar.open("Debe proporcionar la informaci\xf3n solicitada","Ok",{duration:3e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.x),t.Y36(g.g),t.Y36(y.m),t.Y36(l.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-quote-doc"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-screen","bg-slate-100"],[3,"buttons"],[1,"overflow-auto","bg-white","p-2"],[3,"jsonFormData","values","result"],[1,"h-14","flex","justify-between","items-center","bg-white","border-y","border-gray-300","text-lg"],[1,"ml-2"],[1,"block","border","my-2","mr-2","p-2","hover:border-sky-900","hover:text-sky-900",3,"click"],[1,"mb-2"],[4,"ngFor","ngForOf"],[3,"condition","edit","status"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar",1),t.TgZ(2,"div",2)(3,"app-dynamic-form",3),t.NdJ("result",function(r){return a.onGetData(r)}),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6," Editar: Condiciones comerciales "),t.qZA(),t.TgZ(7,"span",6),t.NdJ("click",function(){return a.addCondition()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t._UZ(10,"div",7),t.YNc(11,Q,3,2,"div",8),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("buttons","100000"),t.xp6(2),t.Q6J("jsonFormData",a.settings)("values",a.sharedvar.general),t.xp6(8),t.Q6J("ngForOf",a.quote_cond_list))},dependencies:[p.sg,b.w,v.Hw,C.r,D.y]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(q),h.Bz]}),o})();var x=n(4859),T=n(6842),J=n(2469),A=n(2355);let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,Z,J.R,v.Ps,x.ot,l.ZX,T.N,A.z,l.ZX]}),o})()}}]);