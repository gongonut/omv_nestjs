"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[599],{8599:(G,u,n)=>{n.r(u),n.d(u,{QuoteDocModule:()=>A});var m=n(6895),p=n(2510),t=n(4650),h=n(2327),v=n(5822),f=n(8139),r=n(7009),g=n(4726),C=n(2395),D=n(2993);function y(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"app-cond-quote",5),t.NdJ("status",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onStatus(s))}),t.qZA(),t._UZ(2,"hr"),t.qZA()}if(2&o){const e=d.$implicit;t.xp6(1),t.Q6J("condition",e)("edit",!0)}}const Q=[{path:"",component:(()=>{class o{constructor(e,a,s,i){this.dg=e,this.httpGen=a,this.sharedvar=s,this.snkBar=i,this.quote_cond_list=[],this.settings={controls:[{name:"name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"site",label:"Vinculo a la p\xe1gina:",type:"text",style:"w-full",validators:{required:!0}},{name:"phone",label:"Tel\xe9fono:",type:"text",validators:{required:!0}},{name:"address",label:"Direcci\xf3n corta:",type:"text",validators:{required:!0}},{name:"p_iva",label:"Porcentaje de iva:",type:"number",validators:{required:!0}}]}}ngOnInit(){this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition))}getClicked(e){if(2===e.index){const a=this.newCondition("T\xedtulo");this.editAddCondition(a)}}editAddCondition(e){this.dg.aDefault({title:"Condiciones Comerciales",value:e,schema:{controls:[{name:"name",label:"T\xedtulo:",type:"text",style:{width:"150px"},validators:{required:!0}},{name:"detail",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:6,validators:{}}]},dgheigth:600}).subscribe(i=>{if(i){const l=this.quote_cond_list.find(c=>c.name===i.name);l?(l.name=i.name,l.detail=i.detail):this.quote_cond_list.push({name:i.name,detail:i.detail}),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(c=>{})}})}onStatus(e){switch(e.tag){case"edit":this.editAddCondition(e);break;case"delete":const a=this.quote_cond_list.findIndex(s=>s.name===e.name);a>=0&&(this.quote_cond_list.splice(a,1),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(s=>{}))}}newCondition(e){return{name:e}}onGetData(e){e.name=e.name?.toUpperCase()||"",this.dg.updatePropResult(this.sharedvar.general,e),!1!==e._valid_?this.httpGen.updateGeneral(this.sharedvar.general).subscribe(a=>{}):this.snkBar.open("Debe proporcionar la informaci\xf3n solicitada","Ok",{duration:3e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.x),t.Y36(v.g),t.Y36(f.m),t.Y36(r.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-quote-doc"]],decls:5,vars:4,consts:[[1,"flex","flex-col","h-screen","bg-slate-100"],[3,"buttons","onClicked"],[1,"overflow-auto","bg-white","p-2"],[3,"jsonFormData","values","result"],[4,"ngFor","ngForOf"],[3,"condition","edit","status"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"app-nav-bar",1),t.NdJ("onClicked",function(i){return a.getClicked(i)}),t.qZA(),t.TgZ(2,"div",2)(3,"app-dynamic-form",3),t.NdJ("result",function(i){return a.onGetData(i)}),t.qZA(),t.YNc(4,y,3,2,"div",4),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("buttons","101000"),t.xp6(2),t.Q6J("jsonFormData",a.settings)("values",a.sharedvar.general),t.xp6(1),t.Q6J("ngForOf",a.quote_cond_list))},dependencies:[m.sg,g.w,C.r,D.y]}),o})()}];let b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(Q),p.Bz]}),o})();var q=n(7392),x=n(4859),J=n(6842),T=n(2469),Z=n(2355);let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,b,T.R,q.Ps,x.ot,r.ZX,J.N,Z.z,r.ZX]}),o})()}}]);