"use strict";(self.webpackChunkquote_cli_01=self.webpackChunkquote_cli_01||[]).push([[599],{8599:(G,u,n)=>{n.r(u),n.d(u,{QuoteDocModule:()=>A});var m=n(6895),p=n(2510),t=n(4650),v=n(2327),f=n(5822),g=n(8139),d=n(7009),y=n(4726),h=n(7392),D=n(2395),C=n(2993);function b(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"app-cond-quote",9),t.NdJ("status",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onStatus(s))}),t.qZA(),t._UZ(2,"hr"),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("condition",e)("edit",!0)}}const Q=[{path:"",component:(()=>{class o{constructor(e,a,s,i){this.dg=e,this.httpGen=a,this.sharedvar=s,this.snkBar=i,this.quote_cond_list=[],this.settings={controls:[{name:"name",label:"Nombre de la empresa:",type:"text",style:"w-full",validators:{required:!0}},{name:"site",label:"Vinculo a la p\xe1gina:",type:"text",style:"w-full",validators:{required:!0}},{name:"phone",label:"Tel\xe9fono:",type:"text",validators:{required:!0}},{name:"address",label:"Direcci\xf3n corta:",type:"text",validators:{required:!0}},{name:"p_iva",label:"Porcentaje de iva:",type:"number",validators:{required:!0}}]}}ngOnInit(){this.sharedvar.general.quote_condition.length>0&&(this.quote_cond_list=JSON.parse(this.sharedvar.general.quote_condition))}addCondition(){const e=this.newCondition("T\xedtulo");this.editAddCondition(e)}editAddCondition(e){this.dg.aDefault({title:"Condiciones Comerciales",value:e,schema:{controls:[{name:"name",label:"T\xedtulo:",type:"text",style:{width:"150px"},validators:{required:!0}},{name:"detail",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:6,validators:{}}]},dgheigth:600}).subscribe(i=>{if(i){const l=this.quote_cond_list.find(c=>c.name===i.name);l?(l.name=i.name,l.detail=i.detail):this.quote_cond_list.push({name:i.name,detail:i.detail}),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(c=>{})}})}onStatus(e){switch(e.tag){case"edit":this.editAddCondition(e);break;case"delete":const a=this.quote_cond_list.findIndex(s=>s.name===e.name);a>=0&&(this.quote_cond_list.splice(a,1),this.sharedvar.general.quote_condition=JSON.stringify(this.quote_cond_list),this.httpGen.updateGeneral(this.sharedvar.general).subscribe(s=>{}))}}newCondition(e){return{name:e}}onGetData(e){e.name=e.name?.toUpperCase()||"",this.dg.updatePropResult(this.sharedvar.general,e),!1!==e._valid_?this.httpGen.updateGeneral(this.sharedvar.general).subscribe(a=>{}):this.snkBar.open("Debe proporcionar la informaci\xf3n solicitada","Ok",{duration:3e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.x),t.Y36(f.g),t.Y36(g.m),t.Y36(d.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-quote-doc"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-screen","bg-slate-100"],[3,"buttons"],[1,"overflow-auto","bg-white","p-2"],[3,"jsonFormData","values","result"],[1,"h-14","flex","justify-between","items-center","bg-white","border-y","border-gray-300","text-lg"],[1,"ml-2"],[1,"block","border","my-2","mr-2","p-2","hover:border-sky-900","hover:text-sky-900",3,"click"],[1,"mb-2"],[4,"ngFor","ngForOf"],[3,"condition","edit","status"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar",1),t.TgZ(2,"div",2)(3,"app-dynamic-form",3),t.NdJ("result",function(i){return a.onGetData(i)}),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6," Editar: Condiciones comerciales "),t.qZA(),t.TgZ(7,"span",6),t.NdJ("click",function(){return a.addCondition()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()()(),t._UZ(10,"div",7),t.YNc(11,b,3,2,"div",8),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("buttons","100000"),t.xp6(2),t.Q6J("jsonFormData",a.settings)("values",a.sharedvar.general),t.xp6(8),t.Q6J("ngForOf",a.quote_cond_list))},dependencies:[m.sg,y.w,h.Hw,D.r,C.y]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(Q),p.Bz]}),o})();var Z=n(4859),x=n(6842),T=n(2469),J=n(2355);let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,q,T.R,h.Ps,Z.ot,d.ZX,x.N,J.z,d.ZX]}),o})()}}]);